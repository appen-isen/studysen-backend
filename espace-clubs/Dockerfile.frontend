# Dockfile pour le frontend espace clubs en mode production
# Étape 1 : Build de Vite
FROM node:22-alpine AS build

WORKDIR /app
COPY espace-clubs/ ./
# Installer les dépendances (y compris dev pour le build)
RUN npm ci
RUN npm run build

# Étape 2 : Image finale
FROM node:22-alpine

WORKDIR /app
COPY --from=build /app/dist ./
RUN npm install -g serve

EXPOSE 5173

CMD ["serve", "-s", ".", "-l", "5173"]